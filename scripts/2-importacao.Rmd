---
title: "Tópico 2 - Importação de dados"
author: "Beatriz Milz"
date: 'Maio de 2022'
output: html_document
---

- O formato mais comum que utilizamos são os Dataframes.

- Possuem duas dimensões: linhas e colunas.

- Cada colunas pode ser de classes diferentes.

- Pense em uma tabela, como está acostumada a ver no Excel por exemplo. 

- Formatos comuns: CSV, excel, entre outros.

- Importando CSV:

```{r}
library(readr)
dados_pnud <- read_csv2("../dados/base_pnud_min.csv")
```

- Importando excel:

```{r}
library(readxl)
pnud_excel <- read_excel("../dados/base_pnud.xlsx")
```

- Salvando os dados em um arquivo csv:

```{r}
write_csv2(dados_pnud, "../dados/salvando_base_pnud.csv")
```

- Salvando os dados em um arquivo excel:

```{r}
library(writexl)
write_xlsx(dados_pnud, "../dados/salvando_base_pnud.xlsx")
```


## Funções úteis para usar com dataframes

```{r}
# Retorna o número de colunas 
ncol(dados_pnud)

# Retorna o número de linhas
nrow(dados_pnud)

# Retorna o número de colunas e linhas
dim(dados_pnud)

# primeiras linhas
head(dados_pnud)

# dar uma "olhada" na base
library(dplyr)
glimpse(dados_pnud)
```


- Para selecionar colunas, utilize o `$`. Elas retornarão como vetores, e poderemos usar as funções que já conhecemos. Ex: `dados_pnud$ano`.


- Dica: após escrever o `nome_do_dataframe$`, aperte `tab` para que o RStudio faça sugestões de colunas da base.

- A função unique() retorna os valores únicos de um vetor. Exemplo: 

```{r}
unique(dados_pnud$ano)
```

- Outra forma de selecionar elementos é utilizando os colchetes:  `data_frame[numero da linha , numero da coluna]`! 

```{r}
dados_pnud[1, 2] # Seleciona a linha 1 e a coluna 2 
```

- Caso deixe algum dos espaços dentro do colchete vazio, o R retornará todas (as colunas ou linhas):

```{r}
dados_pnud[1, ] # Seleciona a linha 1 e TODAS as colunas
```

```{r}
dados_pnud[ , 2] # Seleciona TODAS as linhas e apenas a coluna 2
```



## Funções básicas


|  Função |  O que retorna? |
|--:|--:|
|  `sum()` |  Soma  | 
|  `mean()` |  Média |
|  `median()` |  Mediana |
|  `var()` |  Variância (simples) |
|  `sd()` |  Desvio Padrão |
|  `max()` |  Valor máximo  |
|  `min()` |  Valor mínimo |
|  `round()` |  Valor arredondado |
|  `sqrt()` |  Raíz quadrada |


- Argumento importante: `na.rm = TRUE`

```{r}
vetor_com_na <- c(NA, 1, 5, 2, 5, NA)
sum(vetor_com_na)
sum(vetor_com_na, na.rm = TRUE)
```

```{r}
mean(vetor_com_na)
mean(vetor_com_na, na.rm = TRUE)
```

## Exemplos:

- Vamos usar os dados para o ano de 2010. Para isso é necessário filtrar os dados, e vamos ver como fazer isso no próximo tópico!

```{r}
dados_pnud_2010 <-  filter(dados_pnud, ano == 2010)
```

```{r}
# Soma de população em 2010: 
sum(dados_pnud_2010$pop)
```

```{r}
# média: expectativa de vida
mean(dados_pnud_2010$espvida)
```

```{r}
# mediana: expectativa de vida
median(dados_pnud_2010$espvida)
```
```{r}
# variância: expectativa de vida
var(dados_pnud_2010$espvida)
```
```{r}
# desvio padrão: expectativa de vida
sd(dados_pnud_2010$espvida)
```

```{r}
# maior valor encontrado
max(dados_pnud_2010$espvida)
```

```{r}
# menor valor encontrado
min(dados_pnud_2010$espvida)
```

```{r}
# media de expectativa de vida
media_espvida <- mean(dados_pnud_2010$espvida)
# arredondando para ter uma casa decimal
round(media_espvida, 1)
```

